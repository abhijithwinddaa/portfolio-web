import{r as i,s as m,j as e,X as L}from"./index-CJfiuc-8.js";import{P as D,T as M}from"./trash-2-D7t-ir6P.js";import{S as Y,a as J}from"./square-pen-C6b0hVzx.js";import{L as h}from"./loader-circle-BYE7sdF8.js";import{B as U}from"./briefcase-BQaL0POo.js";import{M as X}from"./map-pin-DltV6x6U.js";import{C as G}from"./calendar-C92eafY8.js";import{S as H}from"./save-CtBouC9b.js";const re=()=>{const[p,f]=i.useState([]),[R,g]=i.useState(!0),[n,y]=i.useState(""),[j,w]=i.useState(null),[q,c]=i.useState(!1),[N,v]=i.useState(!1),[A,_]=i.useState(null),[r,d]=i.useState({title:"",company:"",location:"",start_date:"",end_date:"",is_current:!1,description:"",responsibilities:[]}),[x,u]=i.useState(""),[k,C]=i.useState(!1);i.useEffect(()=>{S()},[]);const S=async()=>{try{g(!0);const{data:t,error:s}=await m.from("experience").select("*").order("start_date",{ascending:!1});if(s)throw s;f(t||[])}catch(t){console.error("Error fetching experiences:",t)}finally{g(!1)}},I=async t=>{if(window.confirm("Are you sure you want to delete this experience?"))try{w(t);const{error:s}=await m.from("experience").delete().eq("id",t);if(s)throw s;f(p.filter(a=>a.id!==t))}catch(s){console.error("Error deleting experience:",s)}finally{w(null)}},T=t=>{v(!0),_(t.id),d({title:t.title||"",company:t.company||"",location:t.location||"",start_date:t.start_date?t.start_date.split("T")[0]:"",end_date:t.end_date?t.end_date.split("T")[0]:"",is_current:t.is_current||!1,description:t.description||"",responsibilities:t.responsibilities||[]}),c(!0)},P=()=>{v(!1),_(null),d({title:"",company:"",location:"",start_date:"",end_date:"",is_current:!1,description:"",responsibilities:[]}),u(""),c(!0)},o=t=>{const{name:s,value:a,type:l,checked:F}=t.target;d(b=>({...b,[s]:l==="checkbox"?F:a})),s==="is_current"&&F&&d(b=>({...b,end_date:""}))},B=()=>{x.trim()&&(d(t=>({...t,responsibilities:[...t.responsibilities,x.trim()]})),u(""))},O=t=>{d(s=>({...s,responsibilities:s.responsibilities.filter((a,l)=>l!==t)}))},K=async t=>{t.preventDefault();try{C(!0);const s={title:r.title,company:r.company,location:r.location,start_date:r.start_date,end_date:r.is_current?null:r.end_date,is_current:r.is_current,description:r.description,responsibilities:r.responsibilities};let a;if(N){const{error:l}=await m.from("experience").update(s).eq("id",A);a=l}else{const{error:l}=await m.from("experience").insert([{...s,created_at:new Date().toISOString()}]);a=l}if(a)throw a;S(),c(!1)}catch(s){console.error("Error saving experience:",s),alert("Failed to save experience. Please try again.")}finally{C(!1)}},E=t=>t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short"}):"",z=p.filter(t=>{var s,a,l;return((s=t.title)==null?void 0:s.toLowerCase().includes(n.toLowerCase()))||((a=t.company)==null?void 0:a.toLowerCase().includes(n.toLowerCase()))||((l=t.location)==null?void 0:l.toLowerCase().includes(n.toLowerCase()))});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Experience"}),e.jsxs("button",{onClick:P,className:"flex items-center px-4 py-2 bg-amber-500/20 border border-amber-500/30 rounded-lg text-amber-400 hover:bg-amber-500/30 transition-all",children:[e.jsx(D,{size:16,className:"mr-2"}),"Add New Experience"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Y,{size:18,className:"text-gray-500"})}),e.jsx("input",{type:"text",placeholder:"Search experiences...",className:"w-full pl-10 pr-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-amber-500/50 focus:ring-1 focus:ring-amber-500/30",value:n,onChange:t=>y(t.target.value)})]}),R?e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsx(h,{size:30,className:"animate-spin text-amber-500"})}):z.length>0?e.jsx("div",{className:"relative pl-8 border-l border-white/10 space-y-10",children:z.map(t=>e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-[41px] w-6 h-6 rounded-full bg-amber-500/20 border border-amber-500/50 flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500"})}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl p-6 hover:border-amber-500/30 transition-all group",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:t.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-2 mt-2 text-sm",children:[e.jsxs("div",{className:"flex items-center text-gray-300",children:[e.jsx(U,{size:14,className:"mr-1.5 text-amber-400"}),t.company]}),t.location&&e.jsxs("div",{className:"flex items-center text-gray-400",children:[e.jsx(X,{size:14,className:"mr-1.5 text-amber-400/70"}),t.location]}),e.jsxs("div",{className:"flex items-center text-gray-400",children:[e.jsx(G,{size:14,className:"mr-1.5 text-amber-400/70"}),E(t.start_date)," - ",t.is_current?"Present":E(t.end_date)]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>T(t),className:"p-1.5 bg-amber-500/20 rounded-md text-amber-400 hover:bg-amber-500/30 transition-colors",children:e.jsx(J,{size:16})}),e.jsx("button",{onClick:()=>I(t.id),disabled:j===t.id,className:"p-1.5 bg-red-500/20 rounded-md text-red-400 hover:bg-red-500/30 transition-colors disabled:opacity-50",children:j===t.id?e.jsx(h,{size:16,className:"animate-spin"}):e.jsx(M,{size:16})})]})]}),t.description&&e.jsx("p",{className:"text-gray-300 mb-4",children:t.description}),t.responsibilities&&t.responsibilities.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-amber-400 mb-2",children:"Key Responsibilities:"}),e.jsx("ul",{className:"list-disc pl-5 space-y-1",children:t.responsibilities.map((s,a)=>e.jsx("li",{className:"text-gray-300 text-sm",children:s},a))})]})]})]},t.id))}):e.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl p-10 text-center",children:[e.jsx("p",{className:"text-gray-400",children:n?"No experiences match your search.":"No experiences found. Add your first work experience!"}),n&&e.jsx("button",{onClick:()=>y(""),className:"mt-4 px-4 py-2 bg-amber-500/20 border border-amber-500/30 rounded-lg text-amber-400 hover:bg-amber-500/30 transition-all",children:"Clear Search"})]}),q&&e.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-[#0a0a1a] border border-white/10 rounded-xl w-full max-w-2xl p-6 space-y-6 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:N?"Edit Experience":"Add New Experience"}),e.jsx("button",{onClick:()=>c(!1),className:"p-1.5 bg-white/10 rounded-full text-gray-400 hover:bg-white/20 transition-colors",children:e.jsx(L,{size:18})})]}),e.jsxs("form",{onSubmit:K,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-300",children:["Job Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"title",name:"title",value:r.title,onChange:o,required:!0,className:"mt-1 block w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-amber-500/50 focus:ring-1 focus:ring-amber-500/30",placeholder:"e.g. Frontend Developer"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"company",className:"block text-sm font-medium text-gray-300",children:["Company ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"company",name:"company",value:r.company,onChange:o,required:!0,className:"mt-1 block w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-amber-500/50 focus:ring-1 focus:ring-amber-500/30",placeholder:"e.g. Acme Inc."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-300",children:"Location"}),e.jsx("input",{type:"text",id:"location",name:"location",value:r.location,onChange:o,className:"mt-1 block w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-amber-500/50 focus:ring-1 focus:ring-amber-500/30",placeholder:"e.g. New York, NY (Remote)"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"start_date",className:"block text-sm font-medium text-gray-300",children:["Start Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",id:"start_date",name:"start_date",value:r.start_date,onChange:o,required:!0,className:"mt-1 block w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-amber-500/50 focus:ring-1 focus:ring-amber-500/30"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"end_date",className:"block text-sm font-medium text-gray-300",children:["End Date ",!r.is_current&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",id:"end_date",name:"end_date",value:r.end_date,onChange:o,disabled:r.is_current,required:!r.is_current,className:"mt-1 block w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-amber-500/50 focus:ring-1 focus:ring-amber-500/30 disabled:bg-white/5 disabled:text-gray-500 disabled:cursor-not-allowed"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_current",name:"is_current",checked:r.is_current,onChange:o,className:"w-4 h-4 text-amber-500 bg-white/5 border-white/10 rounded focus:ring-amber-500/30"}),e.jsx("label",{htmlFor:"is_current",className:"ml-2 text-sm text-gray-300",children:"I currently work here"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-300",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",value:r.description,onChange:o,rows:3,className:"mt-1 block w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-amber-500/50 focus:ring-1 focus:ring-amber-500/30",placeholder:"Brief description of your role"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Key Responsibilities"}),e.jsx("div",{className:"space-y-2 mb-3",children:r.responsibilities.map((t,s)=>e.jsxs("div",{className:"flex items-center justify-between bg-white/5 px-4 py-2 rounded-lg",children:[e.jsx("span",{className:"text-gray-300 text-sm",children:t}),e.jsx("button",{type:"button",onClick:()=>O(s),className:"text-red-400 hover:text-red-300",children:e.jsx(L,{size:16})})]},s))}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"text",value:x,onChange:t=>u(t.target.value),className:"flex-1 px-4 py-2 bg-white/5 border border-white/10 rounded-l-lg text-white placeholder-gray-500 focus:outline-none focus:border-amber-500/50 focus:ring-1 focus:ring-amber-500/30",placeholder:"Add a responsibility"}),e.jsx("button",{type:"button",onClick:B,className:"px-4 py-2 bg-amber-500/20 border border-amber-500/30 rounded-r-lg text-amber-400 hover:bg-amber-500/30 transition-all",children:e.jsx(D,{size:20})})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("button",{type:"submit",disabled:k,className:"flex items-center px-6 py-2 bg-gradient-to-r from-amber-500 to-orange-500 rounded-lg text-white font-medium hover:from-amber-600 hover:to-orange-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:k?e.jsxs(e.Fragment,{children:[e.jsx(h,{size:18,className:"mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{size:18,className:"mr-2"}),"Save"]})})})]})]})})]})};export{re as default};
